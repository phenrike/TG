CREATE DATABASE teste;

USE teste;

CREATE TABLE USUARIO
(
ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT, 
LOGIN VARCHAR(100) NOT NULL UNIQUE, 
SENHA VARCHAR(100) NOT NULL, 
NOME VARCHAR(200) NOT NULL, 
SEXO VARCHAR(10),
DTINSCRICAO DATETIME(6)
);

CREATE TABLE COMPARTILHAMENTO
(
ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT, 
EMISSOR INT NOT NULL,
RECEPTOR INT NOT NULL,
DATAEHORA DATETIME,
FOREIGN KEY (EMISSOR)
        REFERENCES USUARIO(ID)
        ON DELETE CASCADE,
FOREIGN KEY (RECEPTOR)
        REFERENCES USUARIO(ID)
        ON DELETE CASCADE
);

CREATE TABLE REDESOCIAL
(
ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
NOME VARCHAR(200) NOT NULL
);

CREATE TABLE USERNAME
(
ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
IDUSUARIO INT NOT NULL,
IDREDESOCIAL INT NOT NULL,
NOMEUSUARIO VARCHAR(300),
PRIVADO BOOLEAN,
FOREIGN KEY (IDUSUARIO)
        REFERENCES USUARIO(ID)
        ON DELETE CASCADE,
FOREIGN KEY (IDREDESOCIAL)
        REFERENCES REDESOCIAL(ID)
        ON DELETE CASCADE
);

INSERT INTO USUARIO VALUES(0, 'psantos', '12345', 'Paulo Santos', 'Masculino', NOW());

INSERT INTO REDESOCIAL VALUES(0, 'FACEBOOK');
INSERT INTO REDESOCIAL VALUES(0, 'WHATSAPP');
INSERT INTO REDESOCIAL VALUES(0, 'INSTAGRAM');
INSERT INTO REDESOCIAL VALUES(0, 'SNAPCHAT');
INSERT INTO REDESOCIAL VALUES(0, 'TWITTER');
INSERT INTO REDESOCIAL VALUES(0, 'YOUTUBE');
INSERT INTO REDESOCIAL VALUES(0, 'EMAIL');
INSERT INTO REDESOCIAL VALUES(0, 'LINK');


INSERT INTO USERNAME VALUES(0, 1, 1, 'phenrikeps', 0);

select * from usuario u inner join username un on u.id = un.idusuario where un.nomeusuario like '%p%' and un.idredesocial = 1;